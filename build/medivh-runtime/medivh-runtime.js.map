{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap a6a36626605a8e648b9a","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/constant/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/fun_map.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/util.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/rpc/index.js","webpack:///(webpack)/buildin/global.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/util/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/updater.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/dev/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/invoke.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/render.js"],"names":["Rpc","Constant","Dev","Util","GLOBAL_RENDER","COMPONENT_RENDER","LOCATION","ID","VCOMPONENT","STATE","TYPE","COMPONENT_TYPE","COMPONENT_ID","PARENT_COMPONENT_ID","REF","LIEF_CYCLE","FUN_CALLBACK","LIEF_CYCLE_CALLBACK","STOP_PROPAGATION","PREVENT_DEFAULT","EVENT_LIST","IDENTITY","REMOVE_COMPONENTIDS","CONSTRUCTOR","INVOKE","INVOKE_CALLBACK","INVOKE_CALLBACK_ID","DOM_CREATE","DOM_APPENDCHILD","DOM_INSERTBEFORE","GET_RENDER_PARAM","SEND_RENDER_PARAM","REMOVE_ELE","ADD_ELE","CHANGGE_ELE","PREFIX","Cache","Map","ComponentCounter","PureFunCounter","pureFunMap","FunMap","registerComponent","component","componentId","record","set","show","console","log","size","registerParentComponent","parentComponentId","parentRecord","get","parentRecordChildren","push","removeFun","recordData","clear","pushRelativeIdByFunId","funId","relativeId","item","relativeIds","registerFun","context","method","keeped","value","$$keep","counter","id","unregisterByComponentId","children","forEach","child","delete","deleteByComponentId","getComponent","deletePureFun","getPureFun","getFun","pureFun","isArray","isFunc","isString","clonePropsByFilter","componentWillUnmount","obj","ref","props","componentDidMount","proxyMethod","name","fn","args","apply","instantial","parent","data","updater","map","o","type","retInstance","ComponentConstructor","isComponent","cloneData","val","registerParentFlag","isComponentClass","defaultProps","assign","_updater","instanFun","Error","newContext","getChildContext","childContext","render","$$component_flag","Component","prototype","FILTER_ATTR_NAME","store","sanitize","pComponentId","newProps","Object","keys","hasOwnProperty","newType","eleData","lifeCycle","invoke","global","postMessage","init","cb","addMessage","onmessage","toString","call","isObject","isSymbol","i","length","newObj","toArray","concat","isEvent","INVALID_ATTR_NAME_MAP","filterMap","attr","toHump","str","replace","toUpperCase","cloneArgs","dep","reduce","ret","HIDDEN_CONTEXT","isBatchSetState","isBatchForceUpdate","setstateCallbackList","forceUpdateCallbackList","setState","target","partialState","callback","newState","state","shouldComponentUpdate","update","getNewChildContext","sanintizedData","splice","forceUpdate","curContext","oldElement","newElementState","oldElementList","newElementStateList","newIsArray","nEleStateItem","index","oEleItem","key","cloenEleStateItem","componentWillReceiveProps","prevState","renderRet","oldChild","devHook","params","cycleName","targetComponent","onInvoke","start","invokeCallback","invokePromise","invokePromisePreserved","genId","count","Element","tag","isQuery","nodeType","attrs","create","childJS","firstChild","lastChild","nextSibling","toJS","ele","beforeLastChild","targetEl","beforeSibling","opr","Text","content","window","document","createElement","querySelector","createTextNode","devHandle","worker","getElement","domMap","parse","eleChild","attrsKeys","setAttribute","ch","appendChild","insertBefore","vopr","vele","vtarget","fun_count","genFunId","genInvokePromise","api","Promise","resolve","reject","sucId","errId","success","error","instantialData","delId","renderFunc","renderOption","renderParams","rendeFlag","renderDomByData","options","mountData","sendData"],"mappings":"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","file":"medivh-runtime.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"MedivhRuntime\"] = factory();\n\telse\n\t\troot[\"MedivhRuntime\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap a6a36626605a8e648b9a","\n\n\nimport * as rpc from './rpc';\nimport * as constant from './constant';\nimport * as dev from './dev/index'; \nimport * as util from './util/index';\n\n\nexport const Rpc = rpc;\nexport const Constant = constant;\nexport const Dev = dev;\nexport const Util = util;\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/index.js","\n\n\nexport const GLOBAL_RENDER = 'global_render';\nexport const COMPONENT_RENDER = 'component_render';\n\nexport const LOCATION = '$$location';\nexport const ID = '$$com_fun_id';\nexport const VCOMPONENT = '$$VCompoennt';\nexport const STATE = '$$state';\nexport const TYPE = '$$type';\nexport const COMPONENT_TYPE = '$$ctp';\nexport const COMPONENT_ID = '$$componentId';\nexport const PARENT_COMPONENT_ID = '$$parentComponentId';\n// export const HIDDEN_CONTEXT = '$$context';\nexport const REF = '$$ref';\nexport const LIEF_CYCLE = '$$lifecycle';\n\nexport const FUN_CALLBACK = 'function_callback';\nexport const LIEF_CYCLE_CALLBACK = 'lifecycle_callback';\n\n\nexport const STOP_PROPAGATION = 'StopPropagation';\nexport const PREVENT_DEFAULT = 'PreventDefault';\nexport const EVENT_LIST = '$$event_list';\nexport const IDENTITY = '$$identity';\n\n\n// export const COMPONENT_DESTROY = '$$componentDestroy';\nexport const REMOVE_COMPONENTIDS = 'removeComponentIdList';\nexport const CONSTRUCTOR = '$$construct';\nexport const INVOKE = '$$invoke';\nexport const INVOKE_CALLBACK = '$$invoke_callback';\nexport const INVOKE_CALLBACK_ID = '$$fun_id$$';\n\n\nexport const DOM_CREATE = 'domCreate';\nexport const DOM_APPENDCHILD = 'domAppendChild';\nexport const DOM_INSERTBEFORE = 'domInsertBefore';\n\n\n// export const TRIGGLE_WORKER_RENDER = '$$worker_start_rende';\nexport const GET_RENDER_PARAM = '$$get_render_param';\nexport const SEND_RENDER_PARAM = '$$send_render_param';\n\nexport const REMOVE_ELE = 1;\nexport const ADD_ELE = 2;\nexport const CHANGGE_ELE = 3;\n\n// export const VLIST = 'vlist';\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/constant/index.js","\nimport {Constant} from 'medivh-common';\nconst {COMPONENT_ID, INVOKE_CALLBACK_ID} = Constant;\nconst PREFIX = 'webworker';\nconst Cache = new Map();\nlet ComponentCounter = 1;\nlet PureFunCounter = 1;\nconst pureFunMap = new Map();\n\nconst FunMap = {\n  registerComponent(component) {\n    const componentId = `${PREFIX}-${ComponentCounter++}`;\n    const record = new Map();\n    record.set('data', new Map());\n    record.set('children', []);\n    record.set('counter', 1);\n    record.set('component', component);\n    Cache.set(componentId, record);\n    // console.log('register :', componentId, component);\n    component[COMPONENT_ID] = componentId;\n    return componentId;\n        \n  },\n  show() {\n    console.log('size :', Cache.size);\n  },\n  registerParentComponent(parentComponentId, componentId) {\n    if (parentComponentId != null) {\n      let parentRecord = Cache.get(parentComponentId);\n      if (parentRecord) {\n        const parentRecordChildren = parentRecord.get('children');\n        parentRecordChildren.push(componentId);\n      }\n    }\n  },\n  removeFun(componentId) {\n    const record = Cache.get(componentId);\n    const recordData = record.get('data');\n    recordData.clear();\n  },\n  pushRelativeIdByFunId(funId, relativeId) {\n    const item = pureFunMap.get(funId);\n    if (item) {\n      item.relativeIds.push(relativeId);\n    }\n  },\n  registerFun(componentId, context, method, relativeIds, keeped) {\n    // console.log('componentId :', componentId);\n    if (method[INVOKE_CALLBACK_ID]) {\n      return method[INVOKE_CALLBACK_ID];\n    }\n    if (componentId == null) {\n      const funId = `funCallback-${PureFunCounter++}`;\n      method[INVOKE_CALLBACK_ID] = funId;\n      pureFunMap.set(funId, {\n        value: method,\n        keeped: keeped || method.$$keep,\n        relativeIds: relativeIds || []\n      });\n      return funId;\n    }\n    const record = Cache.get(componentId);\n    const counter = record.get('counter') + 1;\n    record.set('counter', counter);\n    const id = `${componentId}-${counter}`;\n    const recordData = record.get('data');\n    recordData.set(id, {context, method});\n        // console.log('Cache :',Cache,Cache.size);\n    return id;\n  },\n  unregisterByComponentId(parentComponentId) {\n    const record = Cache.get(parentComponentId);\n    if (record == null) return;\n    const children = record.get('children');\n    children.forEach((child) => {\n      FunMap.unregisterByComponentId(child);\n      // console.log('unregisterComponent :', child);\n      Cache.delete(child);\n    });\n        // Cache.reduc\n        // ComponentCounter = \n  },\n  deleteByComponentId(componentId) {\n    FunMap.unregisterByComponentId(componentId);\n    // console.log('unregisterComponent :', componentId);\n    Cache.delete(componentId);\n  },\n  getComponent(componentId) {\n    return Cache.get(componentId).get('component');\n  },\n  deletePureFun(id) {\n    return pureFunMap.delete(id);\n  },\n  getPureFun(id) {\n    return pureFunMap.get(id);\n  },\n  getFun(componentId, id) {\n    if (componentId == null) {\n      const pureFun = pureFunMap.get(id);\n      return pureFun.value;\n    }\n    const record = Cache.get(componentId);\n    if (record == null) return record;\n    return record.get('data').get(id);\n  }\n};\n\n\nexport default FunMap;\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/fun_map.js","\nimport {Constant, Util} from 'medivh-common';\nimport FunMap from './fun_map';\n\nconst {COMPONENT_ID, TYPE, STATE, ID, VCOMPONENT, LIEF_CYCLE, CONSTRUCTOR, COMPONENT_TYPE, REF} = Constant;\nconst {isArray, isFunc, isString, clonePropsByFilter} = Util;\n\nfunction componentWillUnmount(obj) {\n  FunMap.deleteByComponentId(obj[COMPONENT_ID]);\n  const {[REF]: ref} = obj.props;\n  if (ref && isFunc(ref)) {\n    ref();\n  }\n}\n\nfunction componentDidMount(obj) {\n  const {[REF]: ref} = obj.props;\n  if (ref && isFunc(ref)) {\n    ref(obj);\n  }\n}\n\nfunction proxyMethod(obj, name, fn) {\n  const method = obj[name];\n  if (method) {\n    obj[name] = function(...args) {\n      fn(obj, ...args);\n      return method.apply(obj, args);\n    };\n  } else {\n    obj[LIEF_CYCLE][name] = true;\n    obj[name] = function(...args) {\n      fn(obj, ...args);\n    };\n  }\n}\n\n\n// let globalQuery;\n// export function getQuery() {\n//   if (globalQuery) return globalQuery;\n//   let query = decodeURIComponent(location.search);\n//   if (query.indexOf('?') === 0) {\n//     query = query.substring(1);\n//   }\n//   const param = query.split('&').reduce((ret, item) => {\n//     if (item == null || item === '') return ret;\n//     const itemArr = item.split('=');\n//     ret[itemArr[0]] = itemArr[1];\n//     return ret;\n//   }, {});\n//   if (param.query) {\n//     param.query = JSON.parse(param.query);\n//   } else {\n//     param.query = {};\n//   }\n//   if (param.hash) {\n//     location.hash = param.hash;\n//   }\n//   globalQuery = param;\n//   return globalQuery;\n// }\n\nexport function instantial(parent, data, context = {}, updater) {\n  if (data == null) return;\n  if (isArray(data)) return data.map(o => instantial(parent, o, context, updater));\n  const type = data[TYPE];\n  if (type == null) return data;\n  let retInstance;\n  let ComponentConstructor = data[CONSTRUCTOR];\n  if (isComponent(data)) {\n    return data;\n    // return null;\n  }\n  let cloneData = clonePropsByFilter(data, {[CONSTRUCTOR]: true}, function(val) {\n    return instantial(parent, val, context, updater);\n  });\n  let registerParentFlag = true;\n  if (type === VCOMPONENT) {\n    if (isComponentClass(ComponentConstructor)) {\n      if (ComponentConstructor.defaultProps) {\n        cloneData = Util.assign({}, ComponentConstructor.defaultProps, cloneData);\n      }\n      retInstance = new ComponentConstructor(cloneData, context);\n      retInstance._updater = updater;\n      proxyMethod(retInstance, 'componentWillUnmount', componentWillUnmount);\n      proxyMethod(retInstance, 'componentDidMount', componentDidMount);\n      retInstance.context = retInstance.context || context;\n      registerParentFlag = false;\n    } else {\n      const instanFun = ComponentConstructor;\n      return instantial(parent, instanFun(cloneData), context, updater);\n    }\n  } else {\n    retInstance = new ComponentConstructor(cloneData, context);\n    // retInstance.context = retInstance.context || context;\n  }\n  FunMap.registerComponent(retInstance);\n  if (!isComponent(retInstance)) {\n    throw new Error(`<${ComponentConstructor.name}> is not a medivh Component`);\n  }\n  if (registerParentFlag && parent) {\n    FunMap.registerParentComponent(parent[COMPONENT_ID], retInstance[COMPONENT_ID]);\n  }\n  // parent && FunMap.registerParentComponent(parent[COMPONENT_ID], retInstance[COMPONENT_ID]);\n\n  let newContext = context;\n  if (retInstance.getChildContext && isFunc(retInstance.getChildContext)) {\n    const childContext = retInstance.getChildContext() || {};\n    newContext = Util.assign({}, context, childContext);\n  }\n  if (retInstance && retInstance.render) {\n    retInstance.props[STATE] = instantial(retInstance, retInstance.render(), newContext, updater);\n  } else {\n    const children = retInstance.props.children;\n    if (children) {\n      retInstance.props.children = instantial(retInstance, children, newContext, updater);\n    }\n  }\n  return retInstance;\n}\n\n\nexport function isComponent(component) {\n  return component && component.$$component_flag;\n}\n\nexport function isComponentClass(Component) {\n  return !!(Component.prototype && Component.prototype.$$component_flag);\n}\n\nconst FILTER_ATTR_NAME = {\n  store: true,\n  [REF]: true\n};\n\nexport function sanitize(obj, pComponentId) {\n  if (isArray(obj)) return obj.map(o => sanitize(o, pComponentId));\n  if (isFunc(obj)) {\n    const id = FunMap.registerFun(pComponentId, null, obj);\n    return {\n      [ID]: id,\n      [COMPONENT_ID]: pComponentId\n    };\n  }\n  if (!isComponent(obj)) {\n    return obj;\n  }\n  let {props} = obj;\n  const componentId = obj[COMPONENT_ID];\n  let children, type = props[TYPE];\n  let newProps = {};\n  FunMap.removeFun(componentId); // 清除掉前面注册过的函数\n  props && Object.keys(props).forEach((name) => {\n    const value = props[name];\n    if (name === 'children') {\n      children = value;\n      return;\n    }\n    if (FILTER_ATTR_NAME[name]) {\n      return;\n    }\n    if (isFunc(value)) {\n      const id = FunMap.registerFun(componentId, null, value);\n      newProps[name] = {\n        [ID]: id,\n        [COMPONENT_ID]: componentId\n      };\n    } else {\n      newProps[name] = sanitize(props[name], pComponentId);\n    }\n  });\n  if (newProps.hasOwnProperty(STATE)) { // 有render出来的结果，其他属性就是多余的\n    newProps = { \n      [STATE]: newProps[STATE]\n    };\n    children = null; \n    // newProps[STATE] = sanitize(newProps[STATE]);\n  }\n  const newType = isString(type) ? type : VCOMPONENT;\n  const eleData = {\n    [COMPONENT_TYPE]: newType,\n    props: newProps,\n    componentId: componentId,\n  };\n  const lifeCycle = obj[LIEF_CYCLE];\n  lifeCycle && (eleData.lifeCycle = obj[LIEF_CYCLE]);\n  children && (eleData.children = sanitize(children, componentId));\n  return eleData;\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/util.js","\n\n\nexport function invoke(type, data) {\n  global.postMessage({\n    type,\n    data\n  });\n}\n\nexport function init(cb) {\n  if (global.addMessage) {\n    global.addMessage(cb);\n  } else {\n    global.onmessage = function({ data }) {\n      cb(data);\n    };\n    // global.addEventListener('message', function({data}) {\n    //   cb(data);\n    // });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/rpc/index.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 5\n// module chunks = 0","import {STATE, TYPE} from '../constant';\nexport function isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function isObject(obj) {\n  return obj != null && typeof obj === 'object';\n}\n\nexport function isString(obj) {\n  return typeof obj === 'string';\n}\n\nexport function isFunc(obj) {\n  return typeof obj === 'function';\n}\n\nexport function isSymbol(obj) {\n  return typeof obj === 'symbol';\n}\n\nexport function assign(obj, ...args) {\n  for (let i = 0; i < args.length; i++) {\n    const newObj = args[i];\n    if (newObj) {\n      for (let i in newObj) obj[i] = newObj[i];\n    }\n  }\n  return obj;\n}\n\nexport function toArray(obj) {\n  if (obj == null) return [];\n  return isArray(obj) ? [].concat(obj) : [obj];\n}\n\nexport function isEvent(obj) {\n  return obj && obj.hasOwnProperty('clientX') && obj.hasOwnProperty('clientY');\n}\n\nconst INVALID_ATTR_NAME_MAP = {\n  children: true,\n  [STATE]: true,\n  [TYPE]: true,\n  key: true\n  // props: true\n};\n\nexport function clonePropsByFilter(obj, filterMap = {}, cb) {\n  const newObj = {};\n  for (let attr in obj) {\n    if (filterMap[attr]) continue;\n    if (cb && !INVALID_ATTR_NAME_MAP[attr]) {\n      newObj[attr] = cb(obj[attr], attr);\n    } else {\n      newObj[attr] = obj[attr];\n    }\n  };\n  return newObj;\n}\n\n// export function cloneEvent(obj,filterMap={}){\n//     const newObj = {};\n//     for (let attr in obj){\n//         if(filterMap[attr] || attr.charAt(0) === '_') continue;\n//         newObj[attr] = obj[attr];\n//     };\n//     return newObj;\n// }\n\nexport function toHump(str) {\n  return str.replace(/^\\S/, (val) => {\n    return val.toUpperCase();\n  });\n}\n\nexport function cloneArgs(args, dep = 3) {\n  if (dep < 0 || isSymbol(args)) return null;\n  if (isArray(args)) {\n    return args.map((item) => {\n      return cloneArgs(item, dep - 1);\n    });\n  } else if (isObject(args)) {\n    return Object.keys(args).reduce((ret, name) => {\n      ret[name] = args[name] ? cloneArgs(args[name], dep - 1) : args[name];\n      return ret;\n    }, {});\n  } else if (isFunc(args)) {\n    return null;\n  }\n  return args;\n}\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/util/index.js","\n\nimport {Constant, Rpc, Util, Dev} from 'medivh-common';\nimport {instantial, sanitize, isComponent} from './util';\nconst {toArray, clonePropsByFilter, assign, isFunc, isArray} = Util;\nconst {TYPE, CONSTRUCTOR, STATE, COMPONENT_ID, COMPONENT_RENDER, HIDDEN_CONTEXT} = Constant;\nconst {invoke} = Rpc;\n\n\n\n\nlet isBatchSetState = false;\nlet isBatchForceUpdate = false;\nconst setstateCallbackList = [];\nconst forceUpdateCallbackList = [];\n// const delMutations = [];\n// const addMutations = [];\n// const changeMutations = [];\n\nfunction setState(target, partialState, callback) {\n  callback && setstateCallbackList.push(callback);\n  let newState;\n  if (isFunc(partialState)) {\n    newState = assign({}, target.state, partialState(target.state));\n  } else {\n    newState = assign({}, target.state, partialState);\n  }\n  if (isBatchSetState || isBatchForceUpdate) {\n    target.state = newState;\n    return;\n  }\n  isBatchSetState = true;\n  if (!target.shouldComponentUpdate || target.shouldComponentUpdate(target.props, newState)) {\n        // if(!target.render){\n        //     throw new Error('render is undefined');   \n        // };\n    target.state = newState;\n    const ret = target.render();\n    // target.context = getNewChildContext(target, target.context);\n    target.props[STATE] = update(target, target.props[STATE], ret, getNewChildContext(target, target.context));\n    const componentId = target[COMPONENT_ID];\n        // console.log('target.props[STATE] :',target.props[STATE]);\n    const sanintizedData = sanitize(target.props[STATE], componentId);\n    invoke(COMPONENT_RENDER, {\n      data: sanintizedData,\n      componentId: componentId\n    });\n  }\n  isBatchSetState = false;\n  setstateCallbackList.forEach((cb) => {\n    cb();\n  });\n  setstateCallbackList.splice(0, setstateCallbackList.length - 1);\n}\n\nfunction forceUpdate(target, callback) {\n  callback && forceUpdateCallbackList.push(callback);\n  if (isBatchForceUpdate) {\n    return;\n  }\n  isBatchForceUpdate = true;\n    // if(!target.render){\n    //     throw new Error('render is undefined');   \n    // };\n  const ret = target.render();\n  target.props[STATE] = update(target, target.props[STATE], ret, getNewChildContext(target, target.context), true);\n  const componentId = target[COMPONENT_ID];\n  const sanintizedData = sanitize(target.props[STATE], componentId);\n  invoke(COMPONENT_RENDER, {\n    data: sanintizedData,\n    componentId: componentId\n  });\n  isBatchForceUpdate = false;\n  forceUpdateCallbackList.forEach((cb) => {\n    cb();\n  });\n  forceUpdateCallbackList.splice(0, forceUpdateCallbackList.length - 1);\n}\n\nconst updater = {\n  setState,\n  forceUpdate\n};\n\n\nfunction getNewChildContext(target, curContext = {}) {\n  if (target && target.getChildContext && isFunc(target.getChildContext)) {\n    const childContext = target.getChildContext() || {};\n    return Util.assign({}, curContext, childContext);\n  }\n  return curContext;\n}\n// getNewChildContext(target,target.context)\nfunction update(target, oldElement, newElementState, newContext = {}, forceUpdate) {\n  const oldElementList = toArray(oldElement);\n  const newElementStateList = toArray(newElementState);\n  const newIsArray = isArray(newElementState);\n  const ret = newElementStateList.map((nEleStateItem, index) => {\n    if (oldElementList.length > 0) {\n      for (let i = 0; i < oldElementList.length; i++) {\n        const oEleItem = oldElementList[i];\n        if (oEleItem && nEleStateItem && \n                    oEleItem[TYPE] &&\n                     oEleItem[TYPE] === nEleStateItem[TYPE] && \n                     ((oEleItem.props.key === nEleStateItem.key) || i === index)) {\n          if (isComponent(nEleStateItem)) {\n            return nEleStateItem;\n          }\n          if (oEleItem.render) {\n            const cloenEleStateItem = clonePropsByFilter(nEleStateItem, {[CONSTRUCTOR]: true}, function(val, name) {\n              return update(target, oEleItem.props[name], val, newContext, forceUpdate);\n            });\n            oEleItem.componentWillReceiveProps && oEleItem.componentWillReceiveProps(cloenEleStateItem, newContext);\n            oEleItem.context = newContext;\n            if (forceUpdate || !oEleItem.shouldComponentUpdate || oEleItem.shouldComponentUpdate(cloenEleStateItem, oEleItem.state)) {\n              const prevState = oEleItem.props[STATE]; // 保留之前的state状态\n              oEleItem.props = cloenEleStateItem;\n              const renderRet = oEleItem.render();\n              oEleItem.props[STATE] = update(oEleItem, prevState, renderRet, getNewChildContext(oEleItem, oEleItem.context), forceUpdate);\n            }\n          } else {\n            const oldChild = oEleItem.props.children;\n            oEleItem.props = clonePropsByFilter(nEleStateItem, {[CONSTRUCTOR]: true}, function(val, name) {\n              return update(target, oEleItem.props[name], val, newContext, forceUpdate);\n              // return instantial(target, val, target.context, updater);\n            });\n            oEleItem.props.children = update(oEleItem, oldChild, nEleStateItem.children, newContext, forceUpdate);\n          }\n          oldElementList.splice(i, 1);\n          return oEleItem;\n        } else {\n          // console.log(oEleItem, nEleStateItem);\n        }\n      }\n            // if(oldElementList.length !== 0){\n            //     oldElementList.forEach((oldEle)=>{\n            //         delMutations.push(oldEle[COMPONENT_ID]);\n            //     })\n            // }\n    }\n    // console.log('nEleStateItem :', nEleStateItem);\n        // addMutations.push(sanitize(newEle,target[COMPONENT_ID]))\n    // if (oldElementList.length === 0) {\n    //   debugger;\n    // }\n    // console.log('nEleStateItem :', nEleStateItem, newElementStateList, oldElementList);\n    return instantial(target, nEleStateItem, newContext, updater);\n  });\n  return newIsArray ? ret : ret[0];\n}\n\n\n\nexport default updater;\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/updater.js","\n\nimport {Constant, Rpc, Dev} from 'medivh-common';\nimport FunMap from './fun_map';\nimport {invokeCallback, invokePromise, invokePromisePreserved, onInvoke} from './invoke';\nimport Render, {start} from './render';\n// import {getQuery} from './util';\nconst {devHook} = Dev;\nconst {FUN_CALLBACK, LIEF_CYCLE_CALLBACK, INVOKE_CALLBACK, SEND_RENDER_PARAM} = Constant;\nconst {init} = Rpc;\n\nexport const render = Render;\ndevHook();\n\ninit(function(data) {\n  const type = data.type;\n  if (FUN_CALLBACK === type) {\n    const {id, componentId, params} = data.data;\n    const record = FunMap.getFun(componentId, id);\n    if (record) {\n      record.method.apply(record.context, params);\n    }\n  } else if (LIEF_CYCLE_CALLBACK === type) {\n    // FunMap.show();\n    const {id, cycleName, params} = data.data;\n    // console.log('cycleName :', cycleName, id);\n    const targetComponent = FunMap.getComponent(id);\n    if (targetComponent) {\n      targetComponent[cycleName](...params);\n    }\n  } else if (INVOKE_CALLBACK === type) {\n    onInvoke(data.data);\n  } else if (SEND_RENDER_PARAM === type) {\n    start(data.data);\n  }\n});\n\n\n\n\n\nexport default {\n  invokeCallback,\n  invokePromise,\n  invokePromisePreserved,\n};\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/index.js","import {DOM_CREATE, DOM_APPENDCHILD, ID, DOM_INSERTBEFORE} from '../constant';\nimport {invoke} from '../rpc/index';\nimport {isArray} from '../util/index';\n\nexport function devHook() {\n  if (process.env.NODE_ENV === 'development') {\n    const PREFIX = 'webworkerstyle';\n    let count = 0;\n    function genId() {\n      return `${PREFIX}-${++count}`;\n    }\n    class Element {\n      constructor(tag, isQuery) {\n        this.tag = tag;\n        this.nodeType = 1;\n        this[ID] = genId();\n        this.isQuery = isQuery;\n        this.attrs = Object.create(null);\n        this.child = [];\n        this.childJS = [];\n        this.firstChild = null;\n        this.lastChild = null;\n        this.nextSibling = null;\n        if (!isQuery) {\n          invoke(DOM_CREATE, this.toJS());\n        }\n      }\n      setAttribute(key, value) {\n        this.attrs[key] = value;\n      }\n      appendChild(item) {\n        const ele = item.toJS();\n        const {tag, nodeType, isQuery, attrs} = this;\n        const beforeLastChild = this.child[this.child.length - 1];\n        if (beforeLastChild) {\n          beforeLastChild.nextSibling = item;\n        }\n        this.child.push(item);\n        this.childJS.push(ele);\n        this.firstChild = this.child[0];\n        this.lastChild = this.child[this.child.length - 1];\n        invoke(DOM_APPENDCHILD, {\n          tag,\n          nodeType,\n          isQuery,\n          attrs,\n          [ID]: this[ID],\n          child: [ele]\n        });\n      }\n      insertBefore(item, target) {\n        let index = -1, targetEl;\n        const ele = item.toJS();\n        for (let i = 0; i < this.child.length; i++) {\n          targetEl = this.child[i];\n          if (targetEl[ID] === target[ID]) {\n            index = i;\n            break;\n          }\n        }\n        if (index === -1) {\n          return\n;\n        }\n        const beforeSibling = this.child[index - 1];\n        beforeSibling && (beforeSibling.nextSibling = item);\n        item.nextSibling = target;\n        this.child.splice(index, 0, item);\n        this.childJS.splice(index, 0, ele);\n        this.firstChild = this.child[0];\n        this.lastChild = this.child[this.child.length - 1];\n        invoke(DOM_INSERTBEFORE, {\n          opr: this.toJS(),\n          ele,\n          target: target.toJS()\n        });\n      }\n      toJS() {\n        const {tag, nodeType, isQuery, attrs, childJS} = this;\n        return {\n          tag,\n          nodeType,\n          isQuery,\n          attrs,\n          child: childJS,\n          [ID]: this[ID]\n        };\n      }\n        }\n    class Text {\n      constructor(content) {\n        this.nodeType = 3;\n        this.content = content;\n        this[ID] = genId();\n        invoke(DOM_CREATE, this.toJS());\n      }\n      toJS() {\n        const {nodeType, content} = this;\n        return {\n          nodeType,\n          content,\n          [ID]: this[ID]\n        };\n      }\n        }\n    global.window = {};\n    global.document = {\n      createElement: function(tag) {\n        return new Element(tag);\n      },\n      querySelector(target) {\n        return new Element(target, true);\n      },\n      createTextNode: function(content) {\n        return new Text(content);\n      }\n    };\n  }\n}\n\nexport function devHandle(data, worker) {\n  if (process.env.NODE_ENV === 'development') {\n    let domMap = worker.domMap;\n    if (domMap == null) {\n      domMap = worker.domMap = new Map();\n    }\n    const type = data.type;\n    function getElement(data) {\n      if (data.isQuery) {\n        return document.querySelector(data.tag);\n      }\n      return domMap.get(data[ID]);\n    }\n    function parse(data) {\n      if (data == null) return data;\n      if (isArray(data)) {\n        return data.map((item) => {\n          return parse(item);\n        });\n      }\n      const {tag, nodeType, isQuery, attrs, child, content} = data;\n      let eleChild = parse(child);\n      let ele = getElement(data);\n      const attrsKeys = attrs ? Object.keys(attrs) : null;\n      (attrsKeys) && attrsKeys.forEach((name) => {\n        ele.setAttribute(name, attrs[name]);\n      });\n      (eleChild && ele) && eleChild.forEach((ch) => {\n        ele.appendChild(ch);\n      });\n      return ele;\n    }\n    function createElement(data) {\n      const {tag, nodeType, content} = data;\n      let ele;\n      if (nodeType === 1) {\n        ele = document.createElement(tag);\n      } else {\n        ele = document.createTextNode(content);\n      }\n      domMap.set(data[ID], ele);\n    }\n    function insertBefore(vopr, vele, vtarget) {\n      let opr = getElement(vopr);\n      let ele = getElement(vele);\n      let target = getElement(vtarget);\n      opr.insertBefore(ele, target);\n    }\n    if (type === DOM_CREATE) {\n      createElement(data.data);\n    } else if (type === DOM_APPENDCHILD) {\n      parse(data.data);\n    } else if (type === DOM_INSERTBEFORE) {\n      const {opr, ele, target} = data.data;\n      insertBefore(opr, ele, target);\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/dev/index.js","\n\nimport {Rpc, Constant} from 'medivh-common';\nimport {sanitize, instantial} from './util';\nimport Updater from './updater';\nconst {ID} = Constant; \nimport FunMap from './fun_map';\n// const FunMap = new Map();\n// const {isArray, isObject, isFunc} = Util;\nlet fun_count = 1;\n\nfunction genFunId() {\n  return `callback-${fun_count++}`;\n}\n\n// function serialize(data, funMap) {\n//   if (data == null) return;\n//   if (isArray(data)) {\n//     return data.map((item) => {\n//       return serialize(item)\n// ;\n//     });\n//   }\n//   if (isObject(data)) {\n//     const ret = {}; \n//     for (let attr in data) {\n//       const value = data[attr];\n//       ret[attr] = serialize(value);\n//     }\n//     return ret;\n//   } else if (isFunc(data)) {\n//     if (data[INVOKE_CALLBACK_ID]) {\n//       funId = data[INVOKE_CALLBACK_ID];\n//     } else{\n//       const funId = `callback-${fun_count++}`;\n//       funMap.set(funId, {\n//         value: data\n//       });\n//       data[INVOKE_CALLBACK_ID] = funId;\n//     }\n//     return {\n//       [INVOKE_CALLBACK_ID]: funId\n//     };\n//   }\n//   return data;\n// }\n\nfunction genInvokePromise(name, keeped) {\n  return function invokePromise(api, ...args) {\n    return new Promise((resolve, reject) => {\n      const sucId = FunMap.registerFun(null, null, resolve, null, keeped); \n      const errId = FunMap.registerFun(null, null, reject, null, keeped); \n      FunMap.pushRelativeIdByFunId(sucId, errId);\n      FunMap.pushRelativeIdByFunId(errId, sucId);\n      const success = {\n        [ID]: sucId\n      };\n      const error = {\n        [ID]: errId\n      };\n      const instantialData = instantial(null, args, null, Updater);\n      // console.log('instantialData :', instantialData, args);\n      Rpc.invoke(Constant.INVOKE, {\n        method: name,\n        api,\n        params: sanitize(instantialData),\n        success,\n        error\n      });\n    });\n  };\n}\n\nexport function invokeCallback(api, ...args) {\n  return Rpc.invoke(Constant.INVOKE, {\n    method: 'invokeContextCallback',\n    api,\n    params: sanitize(instantial(null, args, null, Updater))\n  });\n}\n\nexport const invokePromise = genInvokePromise('invokeContextPromise');\nexport const invokePromisePreserved = genInvokePromise('invokeContextPromise', true);\n\nexport function onInvoke(data = {}) {\n  const {params, id} = data;\n  if (id) {\n    const item = FunMap.getPureFun(id);\n    if (item) {\n      const {value, relativeIds, keeped} = item;\n      if (!keeped) {\n        if (relativeIds) {\n          relativeIds.forEach((delId) => {\n            FunMap.deletePureFun(delId);\n          });\n        }\n        FunMap.deletePureFun(id);\n      }\n      if (value) {\n        value.apply(null, params);\n      }\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/invoke.js","import {Constant, Rpc, Util} from 'medivh-common';\nimport {sanitize, instantial, getQuery} from './util';\nimport Updater from './updater';\n\nconst {invoke} = Rpc;\nconst {GLOBAL_RENDER, GET_RENDER_PARAM, LOCATION} = Constant;\n\n// let renderParams;\nlet renderFunc, renderOption, renderParams, rendeFlag = false;\n\n\nfunction renderDomByData(data, options) {\n  const mountData = instantial(null, data, {}, Updater);\n  const sendData = sanitize(mountData);\n  invoke(GLOBAL_RENDER, {\n    data: sendData,\n    options: options\n  });\n}\nexport function start(params) {\n  if (renderFunc) {\n    renderParams = params;\n    const data = renderFunc(renderParams, renderParams[LOCATION]);\n    renderFunc = null;\n    renderDomByData(data, renderOption);\n  } \n  rendeFlag = true;\n}\n\n\n// GET_RENDER_PARAM\nexport default function render(data, options) {\n  if (Util.isFunc(data)) {\n    renderFunc = data;\n    renderOption = options;\n    if (rendeFlag) {\n      start(renderParams);\n    } else {\n      invoke(GET_RENDER_PARAM);\n    }\n    // renderDomByData(renderFunc(renderParams), options);\n  } else {\n    renderDomByData(data, options);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-runtime/src/render.js"],"sourceRoot":""}
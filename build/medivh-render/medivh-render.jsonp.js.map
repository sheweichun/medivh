{"version":3,"sources":["webpack:///webpack/bootstrap 9d87412f3d7f1fb512c7","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/constant/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/rpc/index.js","webpack:///(webpack)/buildin/global.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/util/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/util.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-common/src/dev/index.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/load_worker.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/parse.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/vcomponent.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/invoke.js","webpack:////Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/component_map.js"],"names":["Rpc","Constant","Dev","Util","GLOBAL_RENDER","COMPONENT_RENDER","LOCATION","ID","VCOMPONENT","STATE","TYPE","COMPONENT_TYPE","COMPONENT_ID","PARENT_COMPONENT_ID","REF","LIEF_CYCLE","FUN_CALLBACK","LIEF_CYCLE_CALLBACK","STOP_PROPAGATION","PREVENT_DEFAULT","EVENT_LIST","IDENTITY","REMOVE_COMPONENTIDS","CONSTRUCTOR","INVOKE","INVOKE_CALLBACK","INVOKE_CALLBACK_ID","DOM_CREATE","DOM_APPENDCHILD","DOM_INSERTBEFORE","GET_RENDER_PARAM","SEND_RENDER_PARAM","REMOVE_ELE","ADD_ELE","CHANGGE_ELE","invoke","type","data","global","postMessage","init","cb","addMessage","onmessage","isArray","obj","Object","prototype","toString","call","isObject","isString","isFunc","isSymbol","assign","args","i","length","newObj","toArray","concat","isEvent","hasOwnProperty","INVALID_ATTR_NAME_MAP","children","clonePropsByFilter","filterMap","attr","toHump","str","replace","val","toUpperCase","cloneArgs","dep","map","item","keys","reduce","ret","name","worker","genOnMessage","devHandle","genPostLifeCycleMessage","componentId","cycleName","id","params","generateFunProxy","attrName","funId","targetProps","newArgs","arg","preventDefaultFlag","stopPropagationFlag","preventDefault","stopPropagation","metaKey","altKey","ctrlKey","shiftKey","button","sendArgs","option","workers","vdom","vdomRender","uiFrameworks","context","preWorkerList","workerList","initFlag","uiFrameworkList","invokeContext","instance","addWorker","preWorkerItem","loadWorker","then","workerItem","initWorker","push","getWorkerList","registerContext","namespace","ctx","registerFrameWorker","newUIFramework","initWorkerList","forEach","err","console","error","removeWorker","workItem","splice","_this","el","bundleJs","cssEls","cssUrls","query","hash","destroy","unmountComponentAtNode","innerHTML","removeCssEls","terminate","reload","componentMap","genComponentMap","parser","createParse","React","ReactDOM","UIFrameworks","FunProxy","postLifeCycleMessage","renderData","render","stateData","target","get","setState","api","method","success","Invoker","deserialize","location","host","hostname","href","origin","pathname","port","protocol","e","devHook","genId","PREFIX","count","Element","tag","isQuery","nodeType","attrs","create","child","childJS","firstChild","lastChild","nextSibling","toJS","key","value","ele","beforeLastChild","index","targetEl","beforeSibling","opr","Text","content","window","document","createElement","querySelector","createTextNode","getElement","domMap","parse","eleChild","attrsKeys","setAttribute","ch","appendChild","set","insertBefore","vopr","vele","vtarget","Map","JS_CACHE","workerId","createWorker","url","blob","BlobBuilder","WebKitBlobBuilder","MozBlobBuilder","MSBlobBuilder","append","getBlob","Blob","Worker","URL","createObjectURL","encodeURIComponent","docHead","loadCss","cssUrl","link","rel","getElementsByTagName","loadCssList","cssUrlList","cssURL","removeChild","cache","Promise","resolve","reject","urlResp","oReq","XMLHttpRequest","addEventListener","responseText","open","send","getList","urls","splitChar","all","resps","join","preEl","jsUrls","jsCodes","getElementById","jsUrlList","Error","loadedWorker","FILTER_ATTR_MAP","typeMap","extractUIComponent","frameworks","cacheComponent","typeList","split","VComponent","createVComponent","props","lifeCycle","RenderComponent","newProps","bind","humpComponent","renderChildren","retComponent","registerLifeCycle","component","cycleMap","apply","replaceComponentId","nextProps","newId","oldId","register","state","unregister","Component","genProxyFunction","getContextAndTarget","apiList","fun_flag_id","invokeContextCallback","invokeContextPromise","result","message","Cache","delete"],"mappings":"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","file":"medivh-render.jsonp.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"../\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 9d87412f3d7f1fb512c7","\n\n\nimport * as rpc from './rpc';\nimport * as constant from './constant';\nimport * as dev from './dev/index'; \nimport * as util from './util/index';\n\n\nexport const Rpc = rpc;\nexport const Constant = constant;\nexport const Dev = dev;\nexport const Util = util;\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/index.js","\n\n\nexport const GLOBAL_RENDER = 'global_render';\nexport const COMPONENT_RENDER = 'component_render';\n\nexport const LOCATION = '$$location';\nexport const ID = '$$com_fun_id';\nexport const VCOMPONENT = '$$VCompoennt';\nexport const STATE = '$$state';\nexport const TYPE = '$$type';\nexport const COMPONENT_TYPE = '$$ctp';\nexport const COMPONENT_ID = '$$componentId';\nexport const PARENT_COMPONENT_ID = '$$parentComponentId';\n// export const HIDDEN_CONTEXT = '$$context';\nexport const REF = '$$ref';\nexport const LIEF_CYCLE = '$$lifecycle';\n\nexport const FUN_CALLBACK = 'function_callback';\nexport const LIEF_CYCLE_CALLBACK = 'lifecycle_callback';\n\n\nexport const STOP_PROPAGATION = 'StopPropagation';\nexport const PREVENT_DEFAULT = 'PreventDefault';\nexport const EVENT_LIST = '$$event_list';\nexport const IDENTITY = '$$identity';\n\n\n// export const COMPONENT_DESTROY = '$$componentDestroy';\nexport const REMOVE_COMPONENTIDS = 'removeComponentIdList';\nexport const CONSTRUCTOR = '$$construct';\nexport const INVOKE = '$$invoke';\nexport const INVOKE_CALLBACK = '$$invoke_callback';\nexport const INVOKE_CALLBACK_ID = '$$fun_id$$';\n\n\nexport const DOM_CREATE = 'domCreate';\nexport const DOM_APPENDCHILD = 'domAppendChild';\nexport const DOM_INSERTBEFORE = 'domInsertBefore';\n\n\n// export const TRIGGLE_WORKER_RENDER = '$$worker_start_rende';\nexport const GET_RENDER_PARAM = '$$get_render_param';\nexport const SEND_RENDER_PARAM = '$$send_render_param';\n\nexport const REMOVE_ELE = 1;\nexport const ADD_ELE = 2;\nexport const CHANGGE_ELE = 3;\n\n// export const VLIST = 'vlist';\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/constant/index.js","\n\n\nexport function invoke(type, data) {\n  global.postMessage({\n    type,\n    data\n  });\n}\n\nexport function init(cb) {\n  if (global.addMessage) {\n    global.addMessage(cb);\n  } else {\n    global.onmessage = function({ data }) {\n      cb(data);\n    };\n    // global.addEventListener('message', function({data}) {\n    //   cb(data);\n    // });\n  }\n}\n\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/rpc/index.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/global.js\n// module id = 3\n// module chunks = 0","import {STATE, TYPE} from '../constant';\nexport function isArray(obj) {\n  return Object.prototype.toString.call(obj) === '[object Array]';\n}\n\nexport function isObject(obj) {\n  return obj != null && typeof obj === 'object';\n}\n\nexport function isString(obj) {\n  return typeof obj === 'string';\n}\n\nexport function isFunc(obj) {\n  return typeof obj === 'function';\n}\n\nexport function isSymbol(obj) {\n  return typeof obj === 'symbol';\n}\n\nexport function assign(obj, ...args) {\n  for (let i = 0; i < args.length; i++) {\n    const newObj = args[i];\n    if (newObj) {\n      for (let i in newObj) obj[i] = newObj[i];\n    }\n  }\n  return obj;\n}\n\nexport function toArray(obj) {\n  if (obj == null) return [];\n  return isArray(obj) ? [].concat(obj) : [obj];\n}\n\nexport function isEvent(obj) {\n  return obj && obj.hasOwnProperty('clientX') && obj.hasOwnProperty('clientY');\n}\n\nconst INVALID_ATTR_NAME_MAP = {\n  children: true,\n  [STATE]: true,\n  [TYPE]: true,\n  key: true\n  // props: true\n};\n\nexport function clonePropsByFilter(obj, filterMap = {}, cb) {\n  const newObj = {};\n  for (let attr in obj) {\n    if (filterMap[attr]) continue;\n    if (cb && !INVALID_ATTR_NAME_MAP[attr]) {\n      newObj[attr] = cb(obj[attr], attr);\n    } else {\n      newObj[attr] = obj[attr];\n    }\n  };\n  return newObj;\n}\n\n// export function cloneEvent(obj,filterMap={}){\n//     const newObj = {};\n//     for (let attr in obj){\n//         if(filterMap[attr] || attr.charAt(0) === '_') continue;\n//         newObj[attr] = obj[attr];\n//     };\n//     return newObj;\n// }\n\nexport function toHump(str) {\n  return str.replace(/^\\S/, (val) => {\n    return val.toUpperCase();\n  });\n}\n\nexport function cloneArgs(args, dep = 3) {\n  if (dep < 0 || isSymbol(args)) return null;\n  if (isArray(args)) {\n    return args.map((item) => {\n      return cloneArgs(item, dep - 1);\n    });\n  } else if (isObject(args)) {\n    return Object.keys(args).reduce((ret, name) => {\n      ret[name] = args[name] ? cloneArgs(args[name], dep - 1) : args[name];\n      return ret;\n    }, {});\n  } else if (isFunc(args)) {\n    return null;\n  }\n  return args;\n}\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/util/index.js","\n\n\nexport function postMessage(worker, data) {\n  worker.postMessage(data);\n}\n\nexport function genOnMessage(cb) {\n  return function({data}) {\n    cb(data);\n  };\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/util.js","// import React,{Component} from 'react';\n// import ReactDOM from 'react-dom';\nimport {Constant, Dev, Util} from 'medivh-common';\nimport loadWorker, {removeCssEls} from './load_worker';\nimport createParse from './parse';\nimport Invoker, {deserialize} from './invoke';\nimport genComponentMap from './component_map';\nimport {postMessage, genOnMessage} from './util';\nconst {cloneArgs, isEvent, isArray, isString, assign} = Util;\nconst {devHandle} = Dev;\nconst {GLOBAL_RENDER, COMPONENT_RENDER, INVOKE, FUN_CALLBACK, GET_RENDER_PARAM, SEND_RENDER_PARAM,\n    LIEF_CYCLE_CALLBACK, STOP_PROPAGATION, PREVENT_DEFAULT, LOCATION} = Constant;\n\nfunction genPostLifeCycleMessage(worker) {\n  return function(componentId, cycleName, args) {\n    postMessage(worker, {\n      type: LIEF_CYCLE_CALLBACK,\n      data: {\n        id: componentId,\n        cycleName,\n        params: []\n      }\n    });\n  };\n}\nfunction generateFunProxy(worker) {\n  return function(attrName, componentId, funId, targetProps, ...args) {\n    const newArgs = args.map((arg) => {\n      if (isEvent(arg)) {\n        const preventDefaultFlag = targetProps[`${attrName}${PREVENT_DEFAULT}`];\n        const stopPropagationFlag = targetProps[`${attrName}${STOP_PROPAGATION}`];\n        if (preventDefaultFlag) {\n          arg.preventDefault && arg.preventDefault();\n        }\n        if (stopPropagationFlag) {\n          arg.stopPropagation && arg.stopPropagation();\n        }\n        return {\n          metaKey: arg.metaKey,\n          altKey: arg.altKey,\n          ctrlKey: arg.ctrlKey,\n          shiftKey: arg.shiftKey,\n          button: arg.button\n        };\n      }\n      return arg;\n    });\n    const sendArgs = cloneArgs(newArgs);\n    postMessage(worker, {\n      type: FUN_CALLBACK,\n      data: {\n        id: funId,\n        componentId,\n        params: sendArgs\n      }\n    });\n  };\n}\n\n\n\n\n\n\n\n\n\nexport default function(option) {\n  const {workers, vdom, vdomRender, uiFrameworks, context} = option;\n  const preWorkerList = isArray(workers) ? workers : [workers];\n  let workerList = [];\n  let initFlag = false;\n  const uiFrameworkList = isArray(uiFrameworks) ? uiFrameworks : [uiFrameworks];\n  const invokeContext = context || {};\n  const instance = {\n    addWorker(preWorkerItem) {\n      return loadWorker(preWorkerItem).then((workerItem) => {\n        const ret = this.initWorker(workerItem);\n        workerList.push(ret);\n        return ret;\n      });\n    },\n    getWorkerList() {\n      return workerList;\n    },\n    registerContext(namespace, ctx) {\n      invokeContext[namespace] = ctx;\n    },\n    registerFrameWorker(newUIFramework) {\n      uiFrameworkList.push(newUIFramework);\n    },\n    initWorkerList() {\n      if (initFlag) return;\n      initFlag = true;\n      preWorkerList.forEach((preWorkerItem) => {\n        loadWorker(preWorkerItem).then((workerItem) => {\n          workerList.push(this.initWorker(workerItem));\n        }, (err) => {\n          console.error(err);\n        });\n      });\n    },\n    removeWorker(workItem) {\n      for (let i = 0; i < workerList.length; i++) {\n        if (workerList[i] === workItem) {\n          workerList.splice(i, 1);\n          return;\n        }\n      }\n    },\n    initWorker(workerItem) {\n      const _this = this;\n      try {\n        const {worker, el, bundleJs, cssEls, cssUrls, query, hash} = workerItem;\n        workerItem.destroy = function() {\n          if (vdomRender && vdomRender.unmountComponentAtNode) {\n            vdomRender.unmountComponentAtNode(el);\n            el.innerHTML = '';\n          }\n          removeCssEls(cssEls);\n          worker.terminate();\n          _this.removeWorker(this);\n        };\n        workerItem.reload = function() {\n          this.destroy();\n          if (bundleJs) {\n            _this.addWorker({\n              el: el,\n              worker: bundleJs,\n              cssUrls\n            });\n          }\n        };\n        workerItem.componentMap = genComponentMap(workerItem);\n        const parser = createParse({\n          React: vdom,\n          ReactDOM: vdomRender,\n          componentMap: workerItem.componentMap,\n          UIFrameworks: uiFrameworkList,\n          FunProxy: generateFunProxy(worker),\n          postLifeCycleMessage: genPostLifeCycleMessage(worker)\n        });\n        worker.onmessage = genOnMessage((data) => {\n          const {type} = data;\n          if (type === GLOBAL_RENDER) {\n            const {data: renderData} = data.data;\n            vdomRender.render(parser(renderData), el);\n          } else if (type === COMPONENT_RENDER) {\n            const {data: stateData, componentId} = data.data;\n            const target = workerItem.componentMap.get(componentId);\n            if (!target) return;\n            target.setState({\n              data: parser(stateData)\n            });\n          } else if (type === INVOKE) {\n            const {api, params, method, success, error} = data.data;\n            if (Invoker[method]) {\n              // console.log('api :', api, params);\n              Invoker[method](invokeContext, api, deserialize(params, worker, parser), deserialize(success, worker, parser), deserialize(error, worker, parser));\n            }\n          } else if ( type === GET_RENDER_PARAM) {\n            postMessage(worker, {\n              type: SEND_RENDER_PARAM,\n              data: assign({}, query, {\n                [LOCATION]: {\n                  hash: hash || location.hash,\n                  host: location.host,\n                  hostname: location.hostname,\n                  href: location.href,\n                  origin: location.origin,\n                  pathname: location.pathname,\n                  port: location.port,\n                  protocol: location.protocol\n                }\n              })\n            });\n          }\n          devHandle(data, worker);\n        });\n        return workerItem;\n      } catch (e) {\n        console.error(e);\n      }\n    }\n  };\n  instance.initWorkerList();\n  return instance;\n}\n\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/index.js","import {DOM_CREATE, DOM_APPENDCHILD, ID, DOM_INSERTBEFORE} from '../constant';\nimport {invoke} from '../rpc/index';\nimport {isArray} from '../util/index';\n\nexport function devHook() {\n  if (process.env.NODE_ENV === 'development') {\n    const PREFIX = 'webworkerstyle';\n    let count = 0;\n    function genId() {\n      return `${PREFIX}-${++count}`;\n    }\n    class Element {\n      constructor(tag, isQuery) {\n        this.tag = tag;\n        this.nodeType = 1;\n        this[ID] = genId();\n        this.isQuery = isQuery;\n        this.attrs = Object.create(null);\n        this.child = [];\n        this.childJS = [];\n        this.firstChild = null;\n        this.lastChild = null;\n        this.nextSibling = null;\n        if (!isQuery) {\n          invoke(DOM_CREATE, this.toJS());\n        }\n      }\n      setAttribute(key, value) {\n        this.attrs[key] = value;\n      }\n      appendChild(item) {\n        const ele = item.toJS();\n        const {tag, nodeType, isQuery, attrs} = this;\n        const beforeLastChild = this.child[this.child.length - 1];\n        if (beforeLastChild) {\n          beforeLastChild.nextSibling = item;\n        }\n        this.child.push(item);\n        this.childJS.push(ele);\n        this.firstChild = this.child[0];\n        this.lastChild = this.child[this.child.length - 1];\n        invoke(DOM_APPENDCHILD, {\n          tag,\n          nodeType,\n          isQuery,\n          attrs,\n          [ID]: this[ID],\n          child: [ele]\n        });\n      }\n      insertBefore(item, target) {\n        let index = -1, targetEl;\n        const ele = item.toJS();\n        for (let i = 0; i < this.child.length; i++) {\n          targetEl = this.child[i];\n          if (targetEl[ID] === target[ID]) {\n            index = i;\n            break;\n          }\n        }\n        if (index === -1) {\n          return\n;\n        }\n        const beforeSibling = this.child[index - 1];\n        beforeSibling && (beforeSibling.nextSibling = item);\n        item.nextSibling = target;\n        this.child.splice(index, 0, item);\n        this.childJS.splice(index, 0, ele);\n        this.firstChild = this.child[0];\n        this.lastChild = this.child[this.child.length - 1];\n        invoke(DOM_INSERTBEFORE, {\n          opr: this.toJS(),\n          ele,\n          target: target.toJS()\n        });\n      }\n      toJS() {\n        const {tag, nodeType, isQuery, attrs, childJS} = this;\n        return {\n          tag,\n          nodeType,\n          isQuery,\n          attrs,\n          child: childJS,\n          [ID]: this[ID]\n        };\n      }\n        }\n    class Text {\n      constructor(content) {\n        this.nodeType = 3;\n        this.content = content;\n        this[ID] = genId();\n        invoke(DOM_CREATE, this.toJS());\n      }\n      toJS() {\n        const {nodeType, content} = this;\n        return {\n          nodeType,\n          content,\n          [ID]: this[ID]\n        };\n      }\n        }\n    global.window = {};\n    global.document = {\n      createElement: function(tag) {\n        return new Element(tag);\n      },\n      querySelector(target) {\n        return new Element(target, true);\n      },\n      createTextNode: function(content) {\n        return new Text(content);\n      }\n    };\n  }\n}\n\nexport function devHandle(data, worker) {\n  if (process.env.NODE_ENV === 'development') {\n    let domMap = worker.domMap;\n    if (domMap == null) {\n      domMap = worker.domMap = new Map();\n    }\n    const type = data.type;\n    function getElement(data) {\n      if (data.isQuery) {\n        return document.querySelector(data.tag);\n      }\n      return domMap.get(data[ID]);\n    }\n    function parse(data) {\n      if (data == null) return data;\n      if (isArray(data)) {\n        return data.map((item) => {\n          return parse(item);\n        });\n      }\n      const {tag, nodeType, isQuery, attrs, child, content} = data;\n      let eleChild = parse(child);\n      let ele = getElement(data);\n      const attrsKeys = attrs ? Object.keys(attrs) : null;\n      (attrsKeys) && attrsKeys.forEach((name) => {\n        ele.setAttribute(name, attrs[name]);\n      });\n      (eleChild && ele) && eleChild.forEach((ch) => {\n        ele.appendChild(ch);\n      });\n      return ele;\n    }\n    function createElement(data) {\n      const {tag, nodeType, content} = data;\n      let ele;\n      if (nodeType === 1) {\n        ele = document.createElement(tag);\n      } else {\n        ele = document.createTextNode(content);\n      }\n      domMap.set(data[ID], ele);\n    }\n    function insertBefore(vopr, vele, vtarget) {\n      let opr = getElement(vopr);\n      let ele = getElement(vele);\n      let target = getElement(vtarget);\n      opr.insertBefore(ele, target);\n    }\n    if (type === DOM_CREATE) {\n      createElement(data.data);\n    } else if (type === DOM_APPENDCHILD) {\n      parse(data.data);\n    } else if (type === DOM_INSERTBEFORE) {\n      const {opr, ele, target} = data.data;\n      insertBefore(opr, ele, target);\n    }\n  }\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-common/src/dev/index.js","\n\nimport {Util} from 'medivh-common';\nconst {isString, isArray, isObject, assign} = Util;\nconst JS_CACHE = Object.create(null);\nlet workerId = 1;\n\n// function generateQuery(param = {}) {\n//   const paramStr = JSON.stringify(param);\n//   return `?query=${paramStr}&hash=${location.hash}`;\n// }\n\n// function appendQuery(url, param = {luodan: 444}) {\n//   if (param == null || url == null) return url;\n//   const hashIndex = url.indexOf('#');\n//   let hashStr = location.hash;\n//   if (hashIndex >= 0) {\n//     url = url.substring(0, hashIndex);\n//   }\n//   const askIndex = url.indexOf('?');\n//   const paramStr = JSON.stringify(param);\n//   const queryStr = encodeURIComponent(`query=${paramStr}&hash=${hashStr}`);\n//   if (askIndex >= 0) {\n//     if (url.charAt(url.length - 1) === '&') {\n//       return `${url}${queryStr}`;\n//     }\n//     return `${url}${queryStr ? '&' + queryStr : queryStr}`;\n//   }\n//   return `${url}${queryStr ? '?' + queryStr : queryStr}`;\n// }\n\nfunction createWorker(content, url) {\n  // content = `\n  // console.log('location11123')\n  // (function(global,$$search){\n  //   // console.log('location1112 :',location,global,$$search)\n  //   ${content}\n  // }({\n    \n  // }),\"${generateQuery(query)}\")`;\n  try {\n    try {\n      var blob;\n    \n      try {\n            // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder ||\n            window.WebKitBlobBuilder ||\n            window.MozBlobBuilder ||\n            window.MSBlobBuilder;\n        blob = new BlobBuilder();\n        blob.append(content);\n    \n        blob = blob.getBlob();\n      } catch (e) {\n            // The proposed API\n        blob = new Blob([content]);\n      }\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (url) {\n      // throw Error('Inline worker is not supported');\n      return new Worker(url);\n    }\n    \n    // return new Worker(url);\n  }\n}\n\nlet docHead;\nfunction loadCss(cssUrl) {\n  const link = document.createElement('link');\n  link.type = 'text/css';\n  link.rel = 'stylesheet';\n  link.href = cssUrl;\n  if (!docHead) {\n    docHead = document.getElementsByTagName('head')[0];\n  }\n  docHead.appendChild(link);\n  return link;\n}\n\nfunction loadCssList(cssUrlList) {\n  return cssUrlList.map((cssURL) => {\n    return loadCss(cssURL);\n  });\n}\n\nexport function removeCssEls(cssEls) {\n  if (cssEls == null) return;\n  return cssEls.forEach((el) => {\n    docHead.removeChild(el);\n  });\n}\n\nfunction toArray(obj) {\n  if (obj == null) return [];\n  if (isArray(obj)) {\n    return obj;\n  }\n  return [obj];\n}\n\n\nfunction get(url, cache) {\n  return new Promise((resolve, reject) => {\n    const urlResp = JS_CACHE[url];\n    if (cache && urlResp) {\n      return resolve(urlResp);\n    }\n    const oReq = new XMLHttpRequest();\n    oReq.addEventListener('load', function() {\n      if (cache) {\n        JS_CACHE[url] = this.responseText;\n      }\n      return resolve(this.responseText);\n    }, false);\n    oReq.addEventListener('abort', reject, false);\n    oReq.addEventListener('error', reject, false);\n    oReq.open('get', url, true);\n    oReq.send();\n  });\n}\n\nfunction getList(urls = [], splitChar) {\n  return Promise.all(urls.map(function(url) {\n    if (isObject(url)) {\n      return get(url.url, url.cache);\n    }\n    return get(url);\n  })).then(function(resps) {\n    return resps.join(splitChar);\n  });\n}\n\n\nexport default function(item) {\n  const {worker, el: preEl, cssUrls, jsUrls, jsCodes = '', splitChar = '\\n'} = item;\n  const el = isString(preEl) ? document.getElementById(preEl) : preEl;\n  const cssUrlList = toArray(cssUrls);\n  const jsUrlList = toArray(jsUrls);\n  return new Promise((resolve, reject) => {\n    if (worker == null) return reject(new Error('worker不能为空'));\n    if (worker instanceof Worker) {\n      worker.id = workerId++;\n      return resolve(assign({}, item, {\n        bundleJs: '',\n        worker: worker,\n        el,\n        cssEls: loadCssList(cssUrlList)\n      }));\n    }\n    getList([].concat(jsUrlList, worker), splitChar).then(function(responseText) {\n      const loadedWorker = createWorker(jsCodes + responseText, null);\n      loadedWorker.id = workerId++;\n      return resolve(assign({}, item, {\n        bundleJs: worker,\n        worker: loadedWorker,\n        el,\n        cssEls: loadCssList(cssUrlList)\n      }));\n    }, reject);\n  });\n};\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/load_worker.js","import {Constant, Util} from 'medivh-common';\nimport createVComponent from './vcomponent';\nconst {isArray, isObject, toHump} = Util;\nconst {VCOMPONENT, STATE, ID, COMPONENT_ID, LIEF_CYCLE, COMPONENT_TYPE, TYPE} = Constant;\n\nconst FILTER_ATTR_MAP = {\n  [STATE]: true,\n  [TYPE]: true\n};\n\nconst typeMap = new Map();\n\nfunction extractUIComponent(frameworks, type) {\n  const cacheComponent = typeMap.get(type);\n  if (cacheComponent) {\n    return cacheComponent\n;\n  }\n  const typeList = type.split('-');\n  let target;\n  for (let i = 0; i < frameworks.length; i++) {\n    target = frameworks[i];\n    for (let i = 0; i < typeList.length; i++) {\n      const item = toHump(typeList[i]);\n            // console.log('item :',item);\n      target = target[item];\n      if (target == null) break;\n    }\n    if (target) {\n      break;\n    }\n  }\n    // console.log('target :',target,type);\n  typeMap.set(type, target);\n  return target;\n}\n\n\nexport default function({React, ReactDOM, UIFrameworks, \n    FunProxy, postLifeCycleMessage, componentMap}) {\n  const VComponent = createVComponent({React, ReactDOM, postLifeCycleMessage, componentMap});\n  function parse(data, index) {\n    if (data == null) return;\n    if (isArray(data)) {\n      return data.map((item, index) => {\n        return parse(item, index);\n      });\n    } else if (!isObject(data) || !data[COMPONENT_TYPE]) {\n      return data;\n    }\n    let {componentId, props, children, lifeCycle} = data;\n    let type = data[COMPONENT_TYPE];\n    let RenderComponent = type;\n    let newProps = {};\n    if (props) {\n      for (const name in props) {\n        const item = props[name];\n        if (item && item[ID]) {\n          newProps[name] = FunProxy.bind(null, name, componentId, item[ID], props);\n        } else if (!FILTER_ATTR_MAP[name]) {\n          newProps[name] = parse(props[name]);\n        }\n      }\n      if (props[STATE]) {\n        newProps[STATE] = parse(props[STATE]);\n      }\n    }\n    if (VCOMPONENT === type) {\n      RenderComponent = VComponent;\n      newProps[COMPONENT_ID] = componentId;\n      newProps[LIEF_CYCLE] = lifeCycle;\n    } else if (UIFrameworks) {\n      const humpComponent = extractUIComponent(UIFrameworks, type);\n      humpComponent && (RenderComponent = humpComponent);\n    }\n    // if (index != null && newProps.key == null) {\n    //   newProps.key = componentId;\n    // }\n    // if (componentId) {\n    //   newProps.key = componentId;\n    // }\n    if (componentId) {\n      newProps.key = (props && props.key != null) ? props.key : componentId;\n    }\n    // if (newProps.$$construct) {\n    //   console.log('newProps :', newProps);\n    // }\n    // props[COMPONENT_ID] = componentId;\n    // props[LIEF_CYCLE] = lifeCycle;\n    const renderChildren = children ? parse(children) : [];\n    const retComponent = React.createElement(RenderComponent, newProps, ...renderChildren);\n    return retComponent;\n  }\n  return parse;\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/parse.js","\n\nimport {Constant} from 'medivh-common';\nconst {COMPONENT_ID, LIEF_CYCLE, STATE} = Constant;\n// import ComponentMap from './component_map';\n\n\n\n\nfunction registerLifeCycle(component, postLifeCycleMessage) {\n  const cycleMap = component.props[LIEF_CYCLE];\n  Object.keys(cycleMap).forEach((name) => {\n    const method = component[name];\n    component[name] = function(...args) {\n      method && method.apply(component, args);\n      postLifeCycleMessage(component[COMPONENT_ID], name, args);\n    };\n  });\n}\n\n\n// function proxyComponentWillUnmount(obj){\n//     if(obj.componentWillUnmount){\n//         const method = obj.componentWillUnmount;\n//         obj.componentWillUnmount = function(...args){\n//             ComponentMap.unregister(obj)\n//             return method.apply(obj,args)\n//         }\n//     }else{\n//         obj.componentWillUnmount = function(){\n//             ComponentMap.unregister(obj);\n//         }\n//     }\n// }\n\nfunction replaceComponentId(obj, nextProps, componentMap) {\n  const newId = nextProps[COMPONENT_ID];\n  if (newId) {\n    const oldId = obj[COMPONENT_ID];\n    obj[COMPONENT_ID] = newId;\n    componentMap.replace(oldId, obj);\n  }\n}\n\n// function proxyComponentWillReceiveProps(obj){\n//     if(obj.componentWillReceiveProps){\n//         const method = obj.componentWillReceiveProps;\n//         obj.componentWillReceiveProps = function(nextProps){\n//             replaceComponentId(obj,nextProps);\n//             return method.apply(obj,nextProps)\n//         }\n//     }else{\n//         obj.componentWillReceiveProps = function(nextProps){\n//             console.log('nextProps :',nextProps);\n//             replaceComponentId(obj,nextProps);\n//         }\n//     }\n// }\n\nexport default function({React, ReactDOM, postLifeCycleMessage, componentMap}) {\n  return class VComponent extends React.Component {\n    constructor(props) {\n      super(props);\n      if (props[COMPONENT_ID]) {\n        this[COMPONENT_ID] = props[COMPONENT_ID];\n        componentMap.register(this);\n      }\n      this[COMPONENT_ID] = props[COMPONENT_ID];\n      registerLifeCycle(this, postLifeCycleMessage);\n            // proxyComponentWillUnmount(this);\n            // const {$$state} = props;\n      this.state = {\n        data: props[STATE]\n      };\n    }\n    componentWillUnmount() {\n            // console.log(this.props[COMPONENT_ID]);\n      componentMap.unregister(this);\n    }\n        // componentDidMount(){\n        //     console.log('did mount',this.props);\n        // }\n        // componentDidUpdate(){\n        //     console.log('did update');\n        // }\n    componentWillReceiveProps(nextProps) {\n      this.state.data = nextProps[STATE];\n      replaceComponentId(this, nextProps, componentMap);\n    }\n    render() {\n      const {data} = this.state;\n      return data == null ? '' : data;\n    }\n    };\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/vcomponent.js","\nimport {Constant, Util} from 'medivh-common';\nimport {postMessage} from './util';\nconst {INVOKE_CALLBACK, ID, INVOKE_CALLBACK_ID} = Constant; \nconst {isArray, isObject} = Util;\n\nfunction genProxyFunction(funId, worker) {\n  const ret = function(...args) {\n    return postMessage(worker, {\n      type: INVOKE_CALLBACK,\n      data: {\n        params: args,\n        id: funId\n      }\n    });\n  };\n  ret[ID] = funId;\n  return ret;\n}\nfunction getContextAndTarget(context, api) {\n  if (!api) return {};\n  let apiList = api.split('.');\n  const ret = apiList.reduce((ret, name) => {\n    ret.context = ret.target;\n    if (ret.target) {\n      ret.target = ret.target[name];\n    }\n    return ret;\n  }, {context: null, target: context});\n  return ret;\n}\n\nexport function deserialize(data, worker, parser) {\n  if (data == null) return;\n  if (isArray(data)) {\n    return data.map((item) => {\n      return deserialize(parser(item), worker, parser)\n;\n    });\n  }\n  data = parser(data);\n  if (isObject(data)) {\n    // 此处为兼容性代码，应用只需要去data[ID]，INVOKE_CALLBACK_ID是为了兼容老的\n    const fun_flag_id = data[ID] || data[INVOKE_CALLBACK_ID];\n    if (fun_flag_id) { // 组件里的函数标识\n      return genProxyFunction(fun_flag_id, worker);\n    } else {\n      const ret = {}; \n      for (let attr in data) {\n        ret[attr] = deserialize(parser(data[attr]), worker, parser);\n      }\n    }\n  }\n  return data;\n}\n\n\nconst Invoker = {\n  invokeContextCallback(context, api, params) {\n    const ret = getContextAndTarget(context, api);\n    if (ret.context && ret.target) {\n      ret.target.apply(ret.context, params);\n    }\n  },\n  invokeContextPromise(context, api, params, success, error) {\n    const ret = getContextAndTarget(context, api);\n    if (ret.context && ret.target) {\n      try {\n        const result = ret.target.apply(ret.context, params);\n        if (result && result.then) {\n          result.then(success, error);\n          return;\n        } else {\n          success && success(result);\n          return;\n        }\n      } catch (e) {\n        error && error(e.message);\n        return;\n      }\n    } else {\n      error && error(`此API【${api}】不存在`);\n    }\n  }\n//   invokeContextSync(context, api, params, success, error) {\n//     const ret = getContextAndTarget(context, api);\n//     if (ret.context && ret.target) {\n//       try {\n//         const result = ret.target.apply(ret.context, params);\n//         success && success(result);\n//       } catch (e) {\n//         error && error(e.message);\n//       }\n//     }\n//   }\n};\n\nexport default Invoker;\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/invoke.js","\n\nimport {Constant} from 'medivh-common';\nconst {COMPONENT_ID} = Constant;\n\n// const Cache = new Map();\nexport default function(worker) {\n  const Cache = new Map();\n  return {\n    register(component) {\n      Cache.set(component[COMPONENT_ID], component);\n    },\n    replace(oldId, component) {\n      Cache.delete(oldId);\n      Cache.set(component[COMPONENT_ID], component);\n    },\n    unregister(component) {\n      Cache.delete(component[COMPONENT_ID]);\n    },\n    get(id) {\n      return Cache.get(id);\n    }\n        // show(){\n        //     Cache.forEach(function(value, key, mapObj) {\n        //         console.log(value + '---' + key + '---' + mapObj);\n        //     });\n        // }\n  };\n}\n\n\n// WEBPACK FOOTER //\n// /Users/sheweichun/opensource/medivh/packages/medivh-render/src/render/component_map.js"],"sourceRoot":""}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="//g.alicdn.com/qn/intelligent-service/0.8.0/lib/next.css?v=2248534704_258100" />
    <!-- <link href="http://g-assets.daily.taobao.net//taefed/externals/0.0.3/??next.css" rel="stylesheet" type="text/css" /> -->
    <!-- <script src="http://g-assets.daily.taobao.net//taefed/externals/0.0.3/??babel-polyfill.js,react.js,react-dom.js"></script> -->
    <script src="http://g.alicdn.com/qn/intelligent-service/0.8.19/??lib/react-with-addons.min.js,lib/react-dom.min.js,lib/next.js" crossorigin></script>
    <template>
            <style>
                    .coloured {
                        color: red;
                    }
                </style>
                <p>the first webcompnent is  <strong class="coloured">Hello World</strong></p>
    </template>
    <script>
        var element = Object.create(HTMLElement.prototype);
        // 获取特mplate的内容
        var template = document.currentScript.ownerDocument.querySelector('template').content;
        // element创建完成之后的回调
        element.createdCallback = function() {
            // 创建 shadow root
            var shadowRoot = this.createShadowRoot();
            // 向root中加入模板
            var clone = document.importNode(template, true);
            // let tmp,props = {};
            // for(var i = 0; i < this.attributes.length; i++){
            //     tmp = this.attributes[i];
            //     props[tmp.nodeName] = tmp.nodeValue;
            // }
            // props.dangerouslySetInnerHTML = {__html:this.innerHTML};
            // ReactDOM.render(React.createElement(Next.Button,props),clone);
            shadowRoot.appendChild(clone);
        };
        document.registerElement('my-button', {
            prototype: element
        });
    </script>
</head>
<body>
    <!-- <script src="./app.js"></script> -->
    <div id="container" style="margin:16px;"></div>
    <div id="container1" class="coloured">test</div>
    <div id="container2"></div>
    <my-button type="primary">hello</my-button>
    <!-- <iframe src="//www.baidu.com"></iframe> -->
    <script>
        // const PROXY_SYBOL = Symbol('proxy_symbol');
        // (function(doc){
        //     const createElement = doc.createElement.bind(doc);
        //     doc.createElement = function(name){
        //         const ele = createElement(name);
        //         if(name === 'iframe'){
        //             return new Proxy(ele,{
        //                 get(target,props,receiver){
        //                     if(props === PROXY_SYBOL) return target
        //                     const value = target[props];
        //                     if(typeof value === 'function'){
        //                         return value.bind(target);
        //                     }
        //                     return target[props]
        //                 },
        //                 set(target,props,value,receiver){
        //                     console.log('in set :',props,value);
        //                     target[props] = value
        //                     return value
        //                 }
        //             })
        //         }
        //         return ele;
        //     }
        // })(document)
        // const iframe = document.createElement('iframe');
        // console.log('iframe :',iframe,iframe.Target);
        // iframe.src = '//www.baidu.com';
        // document.body.appendChild(iframe[PROXY_SYBOL])
    </script>
    <div id="demo"></div>
    <!-- <iframe src="//fuwu.taobao.com"></iframe> -->
</body>
</html>